{"version":3,"sources":["webpack:///src/components/CountDown.vue","webpack:///./src/components/CountDown.vue?032c","webpack:///./src/components/CountDown.vue","webpack:///./src/index.js"],"names":["CountDown","name","props","countDownMilliSeconds","type","Number","default","autoStart","Boolean","interval","validator","value","isEmit","data","isCounting","currentMilliseconds","computed","[object Object]","Math","floor","this","days","methods","$emit","continue","gap","min","timeout","setTimeout","progress","end","console","log","hours","minutes","seconds","totalDays","totalHours","totalMinutes","totalSeconds","totalMilliseconds","clearTimeout","pause","watch","$prop","deep","immediate","$nextTick","start","components_CountDown","render","_vm","_h","$createElement","_self","_c","_t","milliseconds","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","Object","defineProperty","module","__WEBPACK_IMPORTED_MODULE_0__components_CountDown_vue__","exports"],"mappings":"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","file":"static/js/index.js","sourcesContent":["<template>\n  <div>\n    <slot\n      :days=\"days\"\n      :hours=\"hours\"\n      :minutes = \"minutes\"\n      :seconds = \"seconds\"\n      :milliseconds = \"milliseconds\"\n      :totalDays = \"totalDays\"\n      :totalHours = \"totalHours\"\n      :totalMinutes = \"totalMinutes\"\n      :totalSeconds = \"totalSeconds\"\n      :totalMilliseconds = \"totalMilliseconds\"\n      :countDownMilliSeconds=\"countDownMilliSeconds\"\n    >\n    </slot>\n  </div>\n</template>\n\n<script>\nconst MILLISECONDS_SECOND = 1000;\nconst MILLISECONDS_MINUTE = 60 * MILLISECONDS_SECOND;\nconst MILLISECONDS_HOUR = 60 * MILLISECONDS_MINUTE;\nconst MILLISECONDS_DAY = 24 * MILLISECONDS_HOUR;\n\nexport default {\n  name: 'CountDown',\n  props: {\n    // 倒计时毫秒数\n    countDownMilliSeconds: {\n      type: Number,\n      default: 0\n    },\n    // 是否自动开启倒计时\n    autoStart: {\n      type: Boolean,\n      default: true\n    },\n    // 倒计时间隔时间\n    interval: {\n      type: Number,\n      default: 1000,\n      validator: value => value >= 0\n    },\n    // 是否将事件的消息发送出去\n    isEmit: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data () {\n    return {\n      isCounting: false,\n      // 记录剩余的总共的毫秒数\n      currentMilliseconds: 123123123\n    };\n  },\n  computed: {\n    // 倒计时还剩的天数\n    days() {\n      return Math.floor(this.currentMilliseconds / MILLISECONDS_DAY);\n    },\n    // 1 天内倒计时还剩的小时数，小于 24\n    hours() {\n      return Math.floor((this.currentMilliseconds % MILLISECONDS_DAY) / MILLISECONDS_HOUR);\n    },\n    // 1 小时内倒计时还剩的分钟数，小于 60\n    minutes() {\n      return Math.floor((this.currentMilliseconds % MILLISECONDS_HOUR) / MILLISECONDS_MINUTE);\n    },\n    // 1 分钟内倒计时还剩的秒数，小于 60\n    seconds() {\n      return Math.floor((this.currentMilliseconds % MILLISECONDS_MINUTE) / MILLISECONDS_SECOND);\n    },\n    // 1 秒内倒计时还剩的毫秒数，小于 1000\n    milliseconds() {\n      return Math.floor(this.currentMilliseconds % MILLISECONDS_SECOND);\n    },\n    // 倒计时总共还剩的天数\n    totalDays() {\n      return this.days;\n    },\n    // 倒计时总共还剩的小时数\n    totalHours() {\n      return Math.floor(this.currentMilliseconds / MILLISECONDS_HOUR);\n    },\n    // 倒计时总共还剩的分钟数\n    totalMinutes() {\n      return Math.floor(this.currentMilliseconds / MILLISECONDS_MINUTE);\n    },\n    // 倒计时总共还剩的秒数\n    totalSeconds() {\n      return Math.floor(this.currentMilliseconds / MILLISECONDS_SECOND);\n    },\n    // 倒计时总共还剩的毫秒数\n    totalMilliseconds() {\n      return this.currentMilliseconds;\n    }\n  },\n  methods: {\n    start() {\n      // 如果已经在倒计时，直接返回\n      if (this.isCounting) {\n        return;\n      }\n\n      this.isCounting = true;\n\n      // 如果需要 emit 事件\n      if (this.isEmit) {\n        this.$emit('start');\n      }\n\n      this.continue();\n    },\n    continue() {\n      if (!this.isCounting) {\n        return;\n      }\n\n      const gap = Math.min(this.currentMilliseconds, this.interval);\n\n      if (gap > 0) {\n        this.timeout = setTimeout(this.progress, gap, this);\n      } else {\n        this.end();\n      }\n    },\n    progress() {\n      if (!this.isCounting) {\n        return;\n      }\n\n      this.currentMilliseconds -= this.interval;\n\n      console.log({\n        days: this.days,\n        hours: this.hours,\n        minutes: this.minutes,\n        seconds: this.seconds,\n        totalDays: this.totalDays,\n        totalHours: this.totalHours,\n        totalMinutes: this.totalMinutes,\n        totalSeconds: this.totalSeconds,\n        totalMilliseconds: this.totalMilliseconds\n      });\n\n      // 如果需要 emit 事件，同时倒计时还没有结束，emit progress 事件\n      if (this.isEmit && this.currentMilliseconds > 0) {\n        this.$emit('progress', {\n          days: this.days,\n          hours: this.hours,\n          minutes: this.minutes,\n          seconds: this.seconds,\n          totalDays: this.totalDays,\n          totalHours: this.totalHours,\n          totalMinutes: this.totalMinutes,\n          totalSeconds: this.totalSeconds,\n          totalMilliseconds: this.totalMilliseconds\n        });\n      }\n\n      this.continue();\n    },\n    pause() {\n      clearTimeout(this.timeout);\n    },\n    end() {\n      if (!this.isCounting) {\n        return;\n      }\n\n      this.pause();\n      this.currentMilliseconds = 0;\n      this.isCounting = false;\n\n      if (this.isEmit) {\n        this.$emit('end');\n      }\n    }\n  },\n  watch: {\n    $prop: {\n      deep: true,\n      immediate: true,\n      handler() {\n        this.currentMilliseconds = this.countDownMilliSeconds;\n\n        if (this.autoStart) {\n          this.$nextTick(() => {\n            this.start();\n          });\n        }\n      }\n    }\n  },\n  beforeDestroy() {\n    this.pause();\n  }\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/CountDown.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._t(\"default\",null,{days:_vm.days,hours:_vm.hours,minutes:_vm.minutes,seconds:_vm.seconds,milliseconds:_vm.milliseconds,totalDays:_vm.totalDays,totalHours:_vm.totalHours,totalMinutes:_vm.totalMinutes,totalSeconds:_vm.totalSeconds,totalMilliseconds:_vm.totalMilliseconds,countDownMilliSeconds:_vm.countDownMilliSeconds})],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-e1327268\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/components/CountDown.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-e1327268\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./CountDown.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./CountDown.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./CountDown.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-e1327268\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./CountDown.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-e1327268\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/CountDown.vue\n// module id = null\n// module chunks = ","import CountDown from './components/CountDown.vue';\n\nmodule.exports = CountDown;\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js"],"sourceRoot":""}